<!DOCTYPE html>
<html lang="ru">
<!-- chip-workshop deploy from GitHub main -->
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>–ê–Ω—Ç–æ–Ω ‚Äî –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ</title>
  <style>
    /* Dark theme (default) */
    :root {
      --bg-dark: #0a0e0c;
      --bg-card: rgba(20, 35, 28, 0.6);
      --green-600: #0d2818;
      --green-500: #1e4d36;
      --green-400: #2d6b4a;
      --green-300: #3d8a5c;
      --green-glow: rgba(45, 107, 74, 0.35);
      --text: #e2e8f0;
      --text-muted: #94a3b8;
      --border: rgba(45, 107, 74, 0.25);
      --body-bg: linear-gradient(135deg, #0a0e0c 0%, #0f1812 35%, #132018 70%, #0a0e0c 100%);
      --hero-gradient: linear-gradient(90deg, #fff 0%, var(--green-300) 100%);
      --input-bg: rgba(10, 14, 12, 0.8);
    }

    /* Light theme (system or class) */
    @media (prefers-color-scheme: light) {
      :root:not(.theme-dark) {
        --bg-dark: #f0f4f2;
        --bg-card: rgba(255, 255, 255, 0.85);
        --green-600: #1e4d36;
        --green-500: #2d6b4a;
        --green-400: #3d8a5c;
        --green-300: #2d6b4a;
        --green-glow: rgba(45, 107, 74, 0.2);
        --text: #1a1f1c;
        --text-muted: #4a5a52;
        --border: rgba(45, 107, 74, 0.2);
        --body-bg: linear-gradient(135deg, #f0f4f2 0%, #e8efe9 35%, #dce8e0 70%, #f0f4f2 100%);
        --hero-gradient: linear-gradient(90deg, #1a1f1c 0%, var(--green-500) 100%);
        --input-bg: rgba(255, 255, 255, 0.9);
      }
    }

    html.theme-light {
      --bg-dark: #f0f4f2;
      --bg-card: rgba(255, 255, 255, 0.85);
      --green-600: #1e4d36;
      --green-500: #2d6b4a;
      --green-400: #3d8a5c;
      --green-300: #2d6b4a;
      --green-glow: rgba(45, 107, 74, 0.2);
      --text: #1a1f1c;
      --text-muted: #4a5a52;
      --border: rgba(45, 107, 74, 0.2);
      --body-bg: linear-gradient(135deg, #f0f4f2 0%, #e8efe9 35%, #dce8e0 70%, #f0f4f2 100%);
      --hero-gradient: linear-gradient(90deg, #1a1f1c 0%, var(--green-500) 100%);
      --input-bg: rgba(255, 255, 255, 0.9);
    }

    html.theme-dark {
      --bg-dark: #0a0e0c;
      --bg-card: rgba(20, 35, 28, 0.6);
      --green-600: #0d2818;
      --green-500: #1e4d36;
      --green-400: #2d6b4a;
      --green-300: #3d8a5c;
      --green-glow: rgba(45, 107, 74, 0.35);
      --text: #e2e8f0;
      --text-muted: #94a3b8;
      --border: rgba(45, 107, 74, 0.25);
      --body-bg: linear-gradient(135deg, #0a0e0c 0%, #0f1812 35%, #132018 70%, #0a0e0c 100%);
      --hero-gradient: linear-gradient(90deg, #fff 0%, var(--green-300) 100%);
      --input-bg: rgba(10, 14, 12, 0.8);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
      background: var(--body-bg);
      min-height: 100vh;
      color: var(--text);
      line-height: 1.6;
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    }

    #particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
    }

    .container {
      max-width: 720px;
      margin: 0 auto;
      padding: 2rem 1.5rem;
      padding-left: max(1.5rem, env(safe-area-inset-left));
      padding-right: max(1.5rem, env(safe-area-inset-right));
      position: relative;
      z-index: 1;
    }

    /* Hero */
    section.hero {
      min-height: 70vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 3rem 0;
      gap: 1.25rem;
    }

    .hero-top {
      display: flex;
      align-items: center;
      gap: 2rem;
      flex-wrap: wrap;
    }

    .hero-avatar {
      width: 280px;
      height: 280px;
      border-radius: 20px;
      object-fit: cover;
      border: 3px solid var(--green-500);
      box-shadow: 0 0 40px var(--green-glow);
      flex-shrink: 0;
    }

    .hero h1 {
      font-size: clamp(2rem, 6vw, 3rem);
      font-weight: 700;
      letter-spacing: -0.02em;
      margin-bottom: 0.25rem;
      background: var(--hero-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hero .title {
      font-size: 1.125rem;
      color: var(--green-400);
      font-weight: 500;
      margin-bottom: 0.25rem;
    }

    .hero .description {
      font-size: 1.125rem;
      color: var(--text-muted);
      max-width: 36ch;
    }

    /* About */
    section.about {
      padding: 4rem 0;
    }

    section.about h2 {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--green-400);
      margin-bottom: 1.5rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    section.about p {
      color: var(--text-muted);
      margin-bottom: 1rem;
      max-width: 65ch;
    }

    section.about p:last-of-type {
      margin-bottom: 0;
    }

    /* Contacts */
    section.contacts {
      padding: 4rem 0 2rem;
    }

    section.contacts h2 {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--green-400);
      margin-bottom: 1.5rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .contact-mosaic {
      display: block;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 1.25rem;
      padding: 1rem;
      margin-top: 0.5rem;
    }

    .contact-list {
      list-style: none;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.75rem 1rem;
    }
    .contact-list li:first-child,
    .contact-list li:last-child {
      grid-column: 1 / -1;
    }

    .contact-list a {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      min-height: 52px;
      padding: 0.875rem 1rem;
      background: rgba(45, 107, 74, 0.12);
      border: 1px solid var(--border);
      border-radius: 1rem;
      color: var(--green-300);
      text-decoration: none;
      font-size: 0.9375rem;
      transition: background 0.25s ease, border-color 0.25s ease, box-shadow 0.25s ease, transform 0.25s ease, color 0.2s ease;
    }

    .contact-list a:hover {
      background: rgba(45, 107, 74, 0.25);
      border-color: var(--green-400);
      box-shadow: 0 0 24px var(--green-glow), 0 4px 12px rgba(0, 0, 0, 0.2);
      transform: translateY(-3px);
      color: var(--green-300);
    }

    .contact-list a:active {
      transform: translateY(-1px);
    }

    .contact-list a.email::before { content: "‚úâ"; }
    .contact-list a.telegram::before { content: "‚úà"; }
    .contact-list a.github::before { content: "‚åó"; }
    .contact-list a.linkedin::before { content: "in"; font-weight: 700; font-size: 0.8em; }

    /* Decorative orbs */
    .orb {
      position: fixed;
      border-radius: 50%;
      filter: blur(80px);
      opacity: 0.35;
      pointer-events: none;
      z-index: 0;
    }

    .orb-1 {
      width: 400px;
      height: 400px;
      background: var(--green-500);
      top: -150px;
      right: -100px;
    }

    .orb-2 {
      width: 300px;
      height: 300px;
      background: var(--green-600);
      bottom: 20%;
      left: -80px;
    }

    /* Scroll-triggered fade-in */
    .scroll-reveal {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    .scroll-reveal.in-view {
      opacity: 1;
      transform: translateY(0);
    }
    .scroll-reveal.reveal-delay-1 { transition-delay: 0.08s; }
    .scroll-reveal.reveal-delay-2 { transition-delay: 0.16s; }
    .scroll-reveal.reveal-delay-3 { transition-delay: 0.24s; }
    .scroll-reveal.reveal-delay-4 { transition-delay: 0.32s; }

    /* Chatbot */
    .chat-toggle {
      position: fixed;
      bottom: max(1.5rem, env(safe-area-inset-bottom));
      right: max(1.5rem, env(safe-area-inset-right));
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: var(--green-500);
      border: 2px solid var(--green-400);
      color: var(--text);
      font-size: 1.5rem;
      cursor: pointer;
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 24px var(--green-glow);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .chat-toggle:hover {
      transform: scale(1.05);
      box-shadow: 0 0 32px var(--green-glow);
    }
    .chat-toggle.is-open {
      background: var(--green-400);
      border-color: var(--green-300);
      box-shadow: 0 0 28px var(--green-glow);
    }
    .chat-panel {
      position: fixed;
      bottom: max(5rem, calc(env(safe-area-inset-bottom) + 3.5rem));
      right: max(1.5rem, env(safe-area-inset-right));
      left: auto;
      width: 340px;
      max-width: calc(100vw - 3rem - env(safe-area-inset-left) - env(safe-area-inset-right));
      height: 420px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.4);
      z-index: 99;
      display: none;
      flex-direction: column;
      overflow: hidden;
      backdrop-filter: blur(12px);
    }
    .chat-panel.open { display: flex; }
    .chat-header {
      padding: 0.75rem 1rem;
      border-bottom: 1px solid var(--border);
      color: var(--green-400);
      font-weight: 600;
      font-size: 0.9375rem;
    }
    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    .chat-msg {
      max-width: 85%;
      padding: 0.6rem 0.9rem;
      border-radius: 10px;
      font-size: 0.9rem;
      line-height: 1.45;
    }
    .chat-msg.bot {
      align-self: flex-start;
      background: rgba(45, 107, 74, 0.25);
      border: 1px solid var(--border);
      color: var(--text);
    }
    .chat-msg.user {
      align-self: flex-end;
      background: var(--green-500);
      color: var(--text);
    }
    .chat-typing {
      display: flex;
      gap: 4px;
      align-items: center;
    }
    .chat-typing span {
      width: 6px;
      height: 6px;
      background: var(--green-400);
      border-radius: 50%;
      animation: chatTyping 1.2s ease-in-out infinite;
    }
    .chat-typing span:nth-child(2) { animation-delay: 0.15s; }
    .chat-typing span:nth-child(3) { animation-delay: 0.3s; }
    @keyframes chatTyping {
      0%, 60%, 100% { transform: translateY(0); opacity: 0.6; }
      30% { transform: translateY(-4px); opacity: 1; }
    }
    .chat-input-wrap {
      padding: 0.75rem;
      border-top: 1px solid var(--border);
    }
    .chat-input-wrap form {
      display: flex;
      gap: 0.5rem;
    }
    .chat-input {
      flex: 1;
      padding: 0.6rem 0.9rem;
      background: var(--input-bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-size: 0.9rem;
    }
    .chat-input::placeholder { color: var(--text-muted); }
    .chat-send {
      padding: 0.6rem 1rem;
      background: var(--green-500);
      border: 1px solid var(--green-400);
      border-radius: 8px;
      color: var(--text);
      font-weight: 500;
      cursor: pointer;
      font-size: 0.9rem;
    }
    .chat-send:hover { background: var(--green-400); }

    /* Theme toggle (iOS-style pill, bottom-left) */
    .theme-toggle {
      position: fixed;
      left: max(1rem, env(safe-area-inset-left));
      bottom: max(1.5rem, env(safe-area-inset-bottom));
      z-index: 100;
      margin: 0;
      padding: 8px;
      border: none;
      background: transparent;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      -webkit-tap-highlight-color: transparent;
    }
    .theme-toggle-track {
      position: relative;
      width: 51px;
      height: 31px;
      border-radius: 31px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.12);
      display: flex;
      align-items: center;
      padding: 0 3px;
      transition: background 0.2s ease, border-color 0.2s ease;
    }
    .theme-toggle:hover .theme-toggle-track {
      background: var(--border);
    }
    .theme-toggle-thumb {
      position: absolute;
      left: 3px;
      top: 3px;
      width: 25px;
      height: 25px;
      border-radius: 50%;
      background: var(--text);
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
    }
    .theme-light .theme-toggle-thumb {
      transform: translateX(20px);
    }
    @media (prefers-color-scheme: light) {
      html:not(.theme-dark):not(.theme-light) .theme-toggle-thumb {
        transform: translateX(20px);
      }
    }
    .theme-toggle-thumb svg {
      width: 12px;
      height: 12px;
      fill: var(--bg-dark);
    }
    .theme-toggle .icon-sun { display: none; }
    .theme-toggle .icon-moon { display: block; }
    .theme-light .theme-toggle .icon-sun { display: block; }
    .theme-light .theme-toggle .icon-moon { display: none; }
    @media (prefers-color-scheme: light) {
      html:not(.theme-dark):not(.theme-light) .theme-toggle .icon-sun { display: block; }
      html:not(.theme-dark):not(.theme-light) .theme-toggle .icon-moon { display: none; }
    }

    /* Mobile / iPhone */
    @media (max-width: 480px) {
      .container {
        padding: 1.5rem max(1rem, env(safe-area-inset-right));
        padding-left: max(1rem, env(safe-area-inset-left));
        padding-right: max(1rem, env(safe-area-inset-right));
      }
      section.hero { min-height: 60vh; padding: 2rem 0; }
      .hero-top { flex-direction: column; align-items: flex-start; gap: 1rem; }
      .hero-avatar { width: 220px; height: 220px; border-radius: 16px; }
      section.about, section.contacts { padding: 3rem 0; }
      .contact-mosaic {
        padding: 1rem;
        border-radius: 1.25rem;
      }
      .contact-list {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.75rem;
      }
      .contact-list a {
        min-height: 48px;
        padding: 0.875rem 0.75rem;
        border-radius: 1rem;
      }
      .chat-panel {
        bottom: max(4.5rem, calc(env(safe-area-inset-bottom) + 3rem));
        right: max(1rem, env(safe-area-inset-right));
        left: max(1rem, env(safe-area-inset-left));
        width: auto;
        height: 380px;
      }
      .chat-toggle {
        bottom: max(1rem, env(safe-area-inset-bottom));
        right: max(1rem, env(safe-area-inset-right));
        width: 56px;
        height: 56px;
        border-radius: 50%;
      }
      .theme-toggle {
        bottom: max(1rem, env(safe-area-inset-bottom));
        left: max(1rem, env(safe-area-inset-left));
        padding: 6px;
      }
      .theme-toggle-track {
        width: 51px;
        height: 31px;
        border-radius: 31px;
      }
    }
    @media (max-width: 360px) {
      .hero-avatar { width: 180px; height: 180px; }
    }
  </style>
</head>
<body>
  <canvas id="particles" aria-hidden="true"></canvas>
  <div class="orb orb-1" aria-hidden="true"></div>
  <div class="orb orb-2" aria-hidden="true"></div>

  <main class="container">
    <section class="hero scroll-reveal" id="hero">
      <div class="hero-top">
        <img src="avatar.jpg" alt="–ê–Ω—Ç–æ–Ω" class="hero-avatar scroll-reveal reveal-delay-1" width="280" height="280">
        <div class="hero-text scroll-reveal reveal-delay-2">
          <h1>–ê–Ω—Ç–æ–Ω</h1>
          <p class="title">Frontend-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ / –î–∏–∑–∞–π–Ω–µ—Ä –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤</p>
        </div>
      </div>
      <p class="description scroll-reveal reveal-delay-3">–î–µ–ª–∞—é —É–¥–æ–±–Ω—ã–µ –∏ –±—ã—Å—Ç—Ä—ã–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã. –ò–Ω—Ç–µ—Ä–µ—Å—É—é—Å—å —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–æ–π, –∞–Ω–∏–º–∞—Ü–∏—è–º–∏ –∏ –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º.</p>
    </section>

    <section class="about scroll-reveal" id="about">
      <h2 class="scroll-reveal reveal-delay-1">–û —Å–µ–±–µ</h2>
      <p class="scroll-reveal reveal-delay-2">
        –†–∞–±–æ—Ç–∞—é –≤ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ: –æ—Ç –≤—ë—Ä—Å—Ç–∫–∏ –¥–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –§–æ–∫—É—Å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –æ–ø—ã—Ç–µ –∏ —á–∏—Å—Ç–æ–º –∫–æ–¥–µ. –õ—é–±–ª—é –¥–æ–≤–æ–¥–∏—Ç—å –∏–¥–µ–∏ –¥–æ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞.
      </p>
      <p class="scroll-reveal reveal-delay-3">
        –í —Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è –ø—Ä–æ–±—É—é –Ω–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, —á–∏—Ç–∞—é –ø—Ä–æ –ø—Ä–æ–¥—É–∫—Ç –∏ –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã. –°—á–∏—Ç–∞—é, —á—Ç–æ —Ö–æ—Ä–æ—à–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ –æ—Ç–≤–ª–µ–∫–∞–µ—Ç, –∞ –ø–æ–º–æ–≥–∞–µ—Ç —Ä–µ—à–∞—Ç—å –∑–∞–¥–∞—á–∏.
      </p>
      <p class="scroll-reveal reveal-delay-4">
        –û—Ç–∫—Ä—ã—Ç –∫ —Å–æ–≤–º–µ—Å—Ç–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–∞–º –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º –∑–∞–¥–∞—á–∞–º. –ï—Å–ª–∏ –µ—Å—Ç—å –∏–¥–µ—è –∏–ª–∏ –≤–æ–ø—Ä–æ—Å ‚Äî –Ω–∞–ø–∏—à–∏—Ç–µ.
      </p>
    </section>

    <section class="contacts scroll-reveal" id="contacts">
      <h2 class="scroll-reveal reveal-delay-1">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
      <div class="contact-mosaic scroll-reveal reveal-delay-2">
        <ul class="contact-list">
          <li><a href="mailto:your@email.com" class="email">your@email.com</a></li>
          <li><a href="https://t.me/your_username" target="_blank" rel="noopener" class="telegram">Telegram</a></li>
          <li><a href="https://github.com/your_username" target="_blank" rel="noopener" class="github">GitHub</a></li>
          <li><a href="https://linkedin.com/in/your_username" target="_blank" rel="noopener" class="linkedin">LinkedIn</a></li>
        </ul>
      </div>
    </section>
  </main>

  <div id="chat-panel" class="chat-panel" aria-label="–ß–∞—Ç">
    <div class="chat-header">–ß–∞—Ç —Å –ê–Ω—Ç–æ–Ω–æ–º</div>
    <div class="chat-messages" id="chat-messages"></div>
    <div class="chat-input-wrap">
      <form id="chat-form">
        <input type="text" class="chat-input" id="chat-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." autocomplete="off">
        <button type="submit" class="chat-send">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
      </form>
    </div>
  </div>
  <button type="button" class="chat-toggle" id="chat-toggle" aria-label="–û—Ç–∫—Ä—ã—Ç—å —á–∞—Ç">üí¨</button>
  <button type="button" class="theme-toggle" id="theme-toggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
    <span class="theme-toggle-track">
      <span class="theme-toggle-thumb">
        <svg class="icon-moon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.39 5.39 0 0 1-4.4 2.26 5.4 5.4 0 0 1-5.4-5.4 5.39 5.39 0 0 1 2.26-4.4C12.92 3.04 12.46 3 12 3z"/></svg>
        <svg class="icon-sun" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 18a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6zm0-2a4 4 0 0 0 4-4 4 4 0 0 0-4-4 4 4 0 0 0-4 4 4 4 0 0 0 4 4zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></svg>
      </span>
    </span>
  </button>

  <script>
    (function () {
      var STORAGE_KEY = 'theme';
      var saved = localStorage.getItem(STORAGE_KEY);
      var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      if (saved === 'light') {
        document.documentElement.classList.add('theme-light');
        document.documentElement.classList.remove('theme-dark');
      } else if (saved === 'dark') {
        document.documentElement.classList.add('theme-dark');
        document.documentElement.classList.remove('theme-light');
      } else {
        document.documentElement.classList.remove('theme-light', 'theme-dark');
      }

      document.getElementById('theme-toggle').addEventListener('click', function () {
        var root = document.documentElement;
        var hasLight = root.classList.contains('theme-light');
        var hasDark = root.classList.contains('theme-dark');
        var systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        var showingDark = hasDark || (!hasLight && !hasDark && systemDark);
        if (showingDark) {
          root.classList.remove('theme-dark');
          root.classList.add('theme-light');
          localStorage.setItem(STORAGE_KEY, 'light');
        } else {
          root.classList.remove('theme-light');
          root.classList.add('theme-dark');
          localStorage.setItem(STORAGE_KEY, 'dark');
        }
      });
    })();

    (function () {
      var els = document.querySelectorAll('.scroll-reveal');
      if (!els.length) return;
      var observer = new IntersectionObserver(function (entries) {
        entries.forEach(function (entry) {
          if (entry.isIntersecting) {
            entry.target.classList.add('in-view');
          }
        });
      }, { rootMargin: '0px 0px -10% 0px', threshold: 0 });
      els.forEach(function (el) { observer.observe(el); });
    })();

    (function () {
      var canvas = document.getElementById('particles');
      var ctx = canvas.getContext('2d');
      var particles = [];
      var mouse = { x: -1e4, y: -1e4 };
      var clicks = [];
      var cursorRadius = 32;
      var cursorStrength = 2.2;
      var clickStrength = 52;
      var clickRadius = 48;
      var count = 1320;
      var homeBlend = 0.90;
      var homeDrift = 0.12;
      var green = { r: 45, g: 107, b: 74 };

      function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        initParticles();
      }

      function initParticles() {
        var w = canvas.width;
        var h = canvas.height;
        var cx = w * 0.5;
        var cy = h * 0.5;
        particles = [];
        for (var i = 0; i < count; i++) {
          var ox = cx + (Math.random() - 0.5) * w * 0.72;
          var oy = cy + (Math.random() - 0.5) * h * 0.72;
          var phase = Math.random() * Math.PI * 2;
          var phase2 = Math.random() * Math.PI * 2;
          var driftAmp = 0.014 + Math.random() * 0.022;
          particles.push({
            x: ox,
            y: oy,
            ox: ox,
            oy: oy,
            vx: 0,
            vy: 0,
            phase: phase,
            phase2: phase2,
            phaseSpeed: 0.004 + Math.random() * 0.008,
            driftAmp: driftAmp
          });
        }
      }

      function addClick(x, y) {
        clicks.push({ x: x, y: y, t: 0 });
      }

      function repulseFrom(px, py, cx, cy, strength, radius) {
        var dx = px - cx;
        var dy = py - cy;
        var d = Math.sqrt(dx * dx + dy * dy) || 0.1;
        if (d > radius) return null;
        var f = (1 - d / radius) * strength / d;
        return { vx: dx * f, vy: dy * f };
      }

      function tick() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        for (var i = 0; i < clicks.length; i++) {
          clicks[i].t++;
          if (clicks[i].t > 35) { clicks.splice(i, 1); i--; continue; }
        }

        for (var i = 0; i < particles.length; i++) {
          var p = particles[i];

          var dx = p.ox - p.x;
          var dy = p.oy - p.y;
          var dist = Math.sqrt(dx * dx + dy * dy) || 0.01;
          var driftSpeed = Math.min(0.35, dist * 0.018);
          p.vx = p.vx * homeBlend + (dx / dist) * driftSpeed * homeDrift;
          p.vy = p.vy * homeBlend + (dy / dist) * driftSpeed * homeDrift;

          p.phase += p.phaseSpeed;
          p.phase2 += p.phaseSpeed * 0.6;
          var driftX = Math.cos(p.phase) * p.driftAmp + Math.sin(p.phase2) * p.driftAmp * 0.4;
          var driftY = Math.sin(p.phase * 0.8 + 1.2) * p.driftAmp + Math.cos(p.phase2 * 0.9) * p.driftAmp * 0.4;
          p.vx += driftX;
          p.vy += driftY;

          var fromCursor = repulseFrom(p.x, p.y, mouse.x, mouse.y, cursorStrength, cursorRadius);
          if (fromCursor) {
            p.vx += fromCursor.vx;
            p.vy += fromCursor.vy;
          }

          for (var c = 0; c < clicks.length; c++) {
            var cl = clicks[c];
            var decay = 1 - cl.t / 35;
            var fromClick = repulseFrom(p.x, p.y, cl.x, cl.y, clickStrength * decay, clickRadius);
            if (fromClick) {
              p.vx += fromClick.vx;
              p.vy += fromClick.vy;
            }
          }

          p.vx *= 0.92;
          p.vy *= 0.92;
          p.x += p.vx;
          p.y += p.vy;

          if (p.x < 0 || p.x > canvas.width) p.vx *= -0.6;
          if (p.y < 0 || p.y > canvas.height) p.vy *= -0.6;
          p.x = Math.max(0, Math.min(canvas.width, p.x));
          p.y = Math.max(0, Math.min(canvas.height, p.y));

          var root = document.documentElement;
          var isLight = root.classList.contains('theme-light') || (!root.classList.contains('theme-dark') && !root.classList.contains('theme-light') && window.matchMedia('(prefers-color-scheme: light)').matches);
          var useGreen = isLight ? { r: 45, g: 107, b: 74 } : green;
          var alpha = isLight ? (0.2 + 0.2 * Math.random()) : (0.45 + 0.35 * Math.random());
          ctx.fillStyle = 'rgba(' + useGreen.r + ',' + useGreen.g + ',' + useGreen.b + ',' + alpha + ')';
          ctx.beginPath();
          ctx.arc(p.x, p.y, 0.68, 0, Math.PI * 2);
          ctx.fill();
        }

        requestAnimationFrame(tick);
      }

      document.addEventListener('mousemove', function (e) {
        mouse.x = e.clientX;
        mouse.y = e.clientY;
      });

      document.addEventListener('mouseleave', function (e) {
        if (!e.relatedTarget || e.relatedTarget === document.body) {
          mouse.x = -1e4;
          mouse.y = -1e4;
        }
      });

      document.addEventListener('click', function (e) {
        addClick(e.clientX, e.clientY);
      });

      window.addEventListener('resize', resize);
      resize();
      tick();
    })();

    // Chatbot: cursor-ai-chatbot (evgyur/cursor-ai-chatbot) ‚Äî –∑–∞–ø—Ä–æ—Å—ã –∫ /api/chat (MiniMax)
    (function () {
      var panel = document.getElementById('chat-panel');
      var toggle = document.getElementById('chat-toggle');
      var messages = document.getElementById('chat-messages');
      var form = document.getElementById('chat-form');
      var input = document.getElementById('chat-input');
      var sendBtn = form.querySelector('button[type="submit"]');
      var welcomeMessage = '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –Ω–∞ —Å–∞–π—Ç–µ –ê–Ω—Ç–æ–Ω–∞. –ú–æ–≥—É —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ –Ω—ë–º, —É—Å–ª—É–≥–∞—Ö, –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö –∏–ª–∏ –æ —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–µ –∏ –º–∏–Ω–∏–º–∞–ª–∏–∑–º–µ. –û —á—ë–º —Å–ø—Ä–æ—Å–∏—Ç–µ?';

      function addMsg(text, isUser) {
        var div = document.createElement('div');
        div.className = 'chat-msg ' + (isUser ? 'user' : 'bot');
        div.textContent = text;
        messages.appendChild(div);
        messages.scrollTop = messages.scrollHeight;
      }

      function addTyping() {
        var div = document.createElement('div');
        div.className = 'chat-msg bot chat-typing';
        div.id = 'chat-typing';
        div.innerHTML = '<span></span><span></span><span></span>';
        messages.appendChild(div);
        messages.scrollTop = messages.scrollHeight;
        return div;
      }

      function removeTyping() {
        var el = document.getElementById('chat-typing');
        if (el) el.remove();
      }

      toggle.addEventListener('click', function () {
        panel.classList.toggle('open');
        toggle.classList.toggle('is-open', panel.classList.contains('open'));
        if (panel.classList.contains('open') && messages.children.length === 0) {
          addMsg(welcomeMessage, false);
        }
        input.focus();
      });

      form.addEventListener('submit', function (e) {
        e.preventDefault();
        var text = input.value.trim();
        if (!text) return;
        addMsg(text, true);
        input.value = '';
        sendBtn.disabled = true;
        addTyping();

        fetch('/api/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message: text })
        })
          .then(function (r) { return r.json(); })
          .then(function (data) {
            removeTyping();
            addMsg(data.response || '–ù–µ—Ç –æ—Ç–≤–µ—Ç–∞. –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞ your@email.com', false);
          })
          .catch(function (err) {
            removeTyping();
            addMsg('–û—à–∏–±–∫–∞ —Å–≤—è–∑–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã –≤–Ω–∏–∑—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–ª–∏ your@email.com', false);
          })
          .then(function () { sendBtn.disabled = false; });
      });
    })();
  </script>
</body>
</html>
